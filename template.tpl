___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "6sense Account Engagement Pixel",
  "categories": ["ANALYTICS", "MARKETING", "PERSONALIZATION"],
  "brand": {
    "id": "github.com_Hey-Drumline",
    "displayName": "6sense",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "The 6sense Account Engagement Platform Key capabilities you need to orchestrate engagement with the right accounts and buyers — at scale.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "setToken",
    "displayName": "Token",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "enableEventTracking",
    "displayName": "Enable Event Tracking",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": true,
        "displayValue": "True"
      },
      {
        "value": false,
        "displayValue": "False"
      }
    ],
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "defaultValue": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

//Required APIs
const log = require('logToConsole');
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const apiURL = "https://j.6sc.co/6si.min.js";
const createQueue = require('createQueue');
const token = data.setToken;
const enableEventTracking = data.enableEventTracking;
const _6siPush = createQueue('_6si');
_6siPush(['enableEventTracking', enableEventTracking],
    ['setToken', token],
    ['setEndpoint', 'b.6sc.co']);

// If the user chose to log debug output, initialize the logging method
log('6sense: Loading script ' + apiURL);

// inject the script with the onSuccess and onFailure methods as callbacks.
if (queryPermission('inject_script', apiURL)) {
    injectScript(apiURL, data.gtmOnSuccess, data.gtmOnFailure);
    log('6sense: Script loaded Successfully.');
} else {
    log('6sense: Script load failed.');
    data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://j.6sc.co/6si.min.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_6si"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 4/20/2021, 9:32:01 AM


